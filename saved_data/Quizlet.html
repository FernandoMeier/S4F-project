<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quizlet</title>
    <link rel="stylesheet" href="../nav_style.css">
    <style>
        * {
            font-family: sans-serif;
            font-weight: lighter;
        }

        button {
            border: 0;
        }

        div {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #addNewWord {
            width: 100px;
            height: 40px;
            background-color: #4255ff;
            color: white;
            margin-top: 15px;
            margin-right: 15px;
            border-radius: 8px;
            font-weight: bold;
            text-align: center;
        }


        .qdiv {
            display: flex;
            flex-direction: column;
            margin-top: 15px;
            width: 1180px;
            height: 180px;
            background: #fff;
            border-radius: 8px;
        }

        .cardNum {
            background: #fff;
            box-sizing: border-box;
            width: 1181px;
            height: 62px;
            border-bottom: 2px solid #F6F7FB;
            border-radius: 8px 8px 0px 0px;
            display: flex;
            align-items: center;
            justify-content: flex-start;
        }

        .cardNum>p {
            background: #fff;
            padding-left: 24px;
        }

        .cardCont {
            display: flex;
            justify-content: center;
            width: 1181px;
            height: 118px;
            background: #fff;
            border-radius: 0px 0px 8px 8px;
        }

        .delete {
            position: relative;
            left: 92%;
            background-color: rgba(0, 0, 0, 0);
        }

        #textinput {
            background-color: rgba(0, 0, 0, 0);
            border-top: 0;
            border-left: 0;
            border-right: 0;
            border-bottom: 2px solid black;
            margin: 24px;
            width: 45%;
            transition: 150ms ease-out;
        }

        #textinput:focus {
            outline: none;
            border-bottom: 4px solid yellow;
        }

        #textinput::placeholder {
            font-weight: 500;
        }

        #listingDiv {
            display: flex;
            flex-direction: column;
        }

        input {
            padding: 5px;
        }

        img {
            background-color: rgba(0, 0, 0, 0);
        }

        .delete {
            background-image: url("../../imgs/delete_dark.png");
            background-size: cover;
            width: 30px;
            height: 30px;
            border: 0;
        }
    </style>
    <nav>
        <ul>
            <li>
                <a href="../../home.html">
                    Home*
                </a>
            </li>
            <li>
                <a href="#">
                    Words*
                </a>
            </li>
            <li>
                <a href="../test_site/read_excel/index.html">
                    Excel reader*
                </a>
            </li>
            <li>
                <a href="../test_site/card_flip/multiCards.html">
                    Flashcards*
                </a>
            </li>
            <li>
                <a href="write/index.html">
                    Write*
                </a>
            </li>
        </ul>
    </nav>
</head>

<body>
    <h2>New Set</h2>
    <p id="elems">0 Elements</p>
    <div id="listingDiv">
        
    </div>
    <div>
        <button id="addNewWord">Add new</button>
        <button id="saveBtn">Save</button>
    </div>
</body>

<script>
    // Get necessary elements
    const addNewWordButton = document.getElementById("addNewWord");
    const listingDiv = document.getElementById("listingDiv");

    // Function to create a new card
    function createCard(index) {
      const newCard = document.createElement("div");
      newCard.classList.add("qdiv");

      const cardNum = document.createElement("div");
      cardNum.classList.add("cardNum");
      const cardIdParagraph = document.createElement("p");
      cardIdParagraph.classList.add("id");
      cardIdParagraph.innerText = index + 1;
      cardNum.appendChild(cardIdParagraph);

      const deleteButton = document.createElement("button");
      deleteButton.classList.add("delete");
      //const deleteImage = document.createElement("img");
      //deleteImage.src = "../imgs/delete_dark.png";
      //deleteButton.appendChild(deleteImage);

      cardNum.appendChild(deleteButton);
      newCard.appendChild(cardNum);

      const cardCont = document.createElement("div");
      cardCont.classList.add("cardCont");
      const wordInput = document.createElement("input");
      wordInput.type = "text";
      wordInput.name = "word";
      wordInput.placeholder = "WORD";
      const defInput = document.createElement("input");
      defInput.type = "text";
      defInput.name = "def";
      defInput.placeholder = "DEFINITION";
      cardCont.appendChild(wordInput);
      cardCont.appendChild(defInput);
      newCard.appendChild(cardCont);

      return newCard;
    }

    // Function to add a new card
    function addCard() {
      const cards = document.querySelectorAll(".qdiv");
      const newCard = createCard(cards.length);
      listingDiv.appendChild(newCard);
      updateElementCount();
    }

    // Function to delete a card
    function deleteCard(event) {
      const cardToDelete = event.target.closest(".qdiv");
      if (cardToDelete) {
        listingDiv.removeChild(cardToDelete);
        updateElementCount();
        updateCardIds();
      }
    }

    // Function to update the element count
    function updateElementCount() {
      const numCards = document.querySelectorAll(".qdiv").length;
      const elems = document.getElementById("elems");
      elems.innerText = numCards + " Element" + (numCards !== 1 ? "s" : "");
    }

    // Function to update the card IDs
    function updateCardIds() {
      const cardIds = document.querySelectorAll(".qdiv .cardNum p");
      cardIds.forEach((idElement, index) => {
        idElement.innerText = index + 1;
      });
    }

    // Attach event listeners
    addNewWordButton.addEventListener("click", addCard);
    listingDiv.addEventListener("click", function (event) {
      if (event.target.classList.contains("delete")) {
        deleteCard(event);
      }
    });

    //add words to sessionstorage "words"

    const saveBtn = document.getElementById("saveBtn");
    saveBtn.addEventListener("click", function () {
      const words = [];
      const cards = document.querySelectorAll(".qdiv");
      cards.forEach((card) => {
        const word = card.querySelector(".cardCont input[name='word']").value;
        const def = card.querySelector(".cardCont input[name='def']").value;
        words.push({
          word: word,
          def: def,
        });
      });
      sessionStorage.setItem("words", JSON.stringify(words));
    });

    //load words from sessionstorage "words"

    const words = JSON.parse(sessionStorage.getItem("words"));
    if (words) {
      words.forEach((word) => {
        addCard();
        const cards = document.querySelectorAll(".qdiv");
        const lastCard = cards[cards.length - 1];
        lastCard.querySelector(".cardCont input[name='word']").value = word.word;
        lastCard.querySelector(".cardCont input[name='def']").value = word.def;
      });
    }
</script>

</html>